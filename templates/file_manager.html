{% extends "base.html" %}

{% block title %}File Manager - Lala Panel{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h2">
        <i class="bi bi-folder"></i> File Manager
    </h1>
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left"></i> Back to Dashboard
    </a>
</div>

<div class="row">
    <div class="col-lg-3 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-list"></i> Select Site</h5>
            </div>
            <div class="card-body p-0">
                {% if sites %}
                <div class="list-group list-group-flush">
                    {% for site in sites %}
                    <a href="#" class="list-group-item list-group-item-action site-selector" 
                       data-site-id="{{ site['id'] }}" data-site-domain="{{ site['domain'] }}">
                        <i class="bi bi-globe"></i> {{ site['domain'] }}
                    </a>
                    {% endfor %}
                </div>
                {% else %}
                <div class="p-3 text-center text-muted">
                    <p>No sites available</p>
                    <a href="{{ url_for('create_site') }}" class="btn btn-sm btn-primary">Create Site</a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="col-lg-9">
        <div class="card" id="file-browser" style="display: none;">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="bi bi-folder-open"></i> 
                        <span id="current-site">Select a site</span>
                    </h5>
                    <div>
                        <button class="btn btn-sm btn-primary" id="upload-btn">
                            <i class="bi bi-upload"></i> Upload
                        </button>
                        <button class="btn btn-sm btn-primary" id="new-file-btn">
                            <i class="bi bi-file-plus"></i> New File
                        </button>
                        <button class="btn btn-sm btn-primary" id="new-folder-btn">
                            <i class="bi bi-folder-plus"></i> New Folder
                        </button>
                        <button class="btn btn-sm btn-success" id="compress-btn" style="display: none;">
                            <i class="bi bi-file-zip"></i> Compress Selected
                        </button>
                    </div>
                </div>
                <div class="mt-2">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb mb-0" id="breadcrumb">
                            <li class="breadcrumb-item active">htdocs</li>
                        </ol>
                    </nav>
                </div>
            </div>
            <div class="card-body p-0">
                <div id="loading" class="text-center p-5" style="display: none;">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
                <div id="file-list-container">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0" id="file-list">
                            <thead>
                                <tr>
                                    <th width="5%"><input type="checkbox" id="select-all"></th>
                                    <th width="45%">Name</th>
                                    <th width="15%">Size</th>
                                    <th width="15%">Modified</th>
                                    <th width="20%">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Files will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="empty-state" class="text-center p-5" style="display: none;">
                    <i class="bi bi-folder2-open display-1 text-muted"></i>
                    <p class="text-muted mt-3">This folder is empty</p>
                </div>
            </div>
        </div>
        
        <div class="card" id="welcome-card">
            <div class="card-body text-center p-5">
                <i class="bi bi-folder display-1 text-muted mb-3"></i>
                <h4>File Manager</h4>
                <p class="text-muted">Select a site from the left to browse and manage files</p>
            </div>
        </div>
    </div>
</div>

<!-- Upload Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Upload File</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="upload-form" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="upload-file" class="form-label">Choose File</label>
                        <input type="file" class="form-control" id="upload-file" name="file" required>
                    </div>
                    <div id="upload-progress" class="progress" style="display: none;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" 
                             role="progressbar" style="width: 0%"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="upload-submit">Upload</button>
            </div>
        </div>
    </div>
</div>

<!-- New Folder Modal -->
<div class="modal fade" id="newFolderModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create New Folder</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="new-folder-form">
                    <div class="mb-3">
                        <label for="folder-name" class="form-label">Folder Name</label>
                        <input type="text" class="form-control" id="folder-name" 
                               name="folder_name" required pattern="[a-zA-Z0-9_\-]+">
                        <div class="form-text">Only letters, numbers, dashes, and underscores allowed</div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="folder-submit">Create</button>
            </div>
        </div>
    </div>
</div>

<!-- New File Modal -->
<div class="modal fade" id="newFileModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create New File</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="new-file-form">
                    <div class="mb-3">
                        <label for="file-name-input" class="form-label">File Name</label>
                        <input type="text" class="form-control" id="file-name-input" 
                               name="file_name" required placeholder="e.g., index.html, script.js">
                        <div class="form-text">Enter a file name with extension</div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="file-submit">Create</button>
            </div>
        </div>
    </div>
</div>

<!-- Rename Modal -->
<div class="modal fade" id="renameModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Rename</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="rename-form">
                    <div class="mb-3">
                        <label for="new-name" class="form-label">New Name</label>
                        <input type="text" class="form-control" id="new-name" name="new_name" required>
                    </div>
                    <input type="hidden" id="rename-old-path">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="rename-submit">Rename</button>
            </div>
        </div>
    </div>
</div>

<!-- Edit File Modal -->
<div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit File: <span id="edit-file-name"></span></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <textarea class="form-control" id="file-content" rows="20" style="font-family: monospace;"></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="save-file">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Compress Modal -->
<div class="modal fade" id="compressModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create ZIP Archive</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="compress-form">
                    <div class="mb-3">
                        <label for="archive-name" class="form-label">Archive Name</label>
                        <input type="text" class="form-control" id="archive-name" 
                               name="archive_name" value="archive.zip" required>
                        <div class="form-text">Enter name for the zip file</div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="compress-submit">Create Archive</button>
            </div>
        </div>
    </div>
</div>

<script>
let currentSiteId = null;
let currentPath = '';

document.addEventListener('DOMContentLoaded', function() {
    // Site selector
    document.querySelectorAll('.site-selector').forEach(function(link) {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            currentSiteId = this.dataset.siteId;
            const domain = this.dataset.siteDomain;
            
            // Update active state
            document.querySelectorAll('.site-selector').forEach(l => l.classList.remove('active'));
            this.classList.add('active');
            
            // Update UI
            document.getElementById('current-site').textContent = domain;
            document.getElementById('welcome-card').style.display = 'none';
            document.getElementById('file-browser').style.display = 'block';
            
            // Load root directory
            currentPath = '';
            loadDirectory('');
        });
    });
    
    // Upload button
    document.getElementById('upload-btn').addEventListener('click', function() {
        if (!currentSiteId) return;
        new bootstrap.Modal(document.getElementById('uploadModal')).show();
    });
    
    // New folder button
    document.getElementById('new-folder-btn').addEventListener('click', function() {
        if (!currentSiteId) return;
        new bootstrap.Modal(document.getElementById('newFolderModal')).show();
    });
    
    // New file button
    document.getElementById('new-file-btn').addEventListener('click', function() {
        if (!currentSiteId) return;
        new bootstrap.Modal(document.getElementById('newFileModal')).show();
    });
    
    // Upload submit
    document.getElementById('upload-submit').addEventListener('click', function() {
        if (!currentSiteId) return;
        
        const form = document.getElementById('upload-form');
        const fileInput = document.getElementById('upload-file');
        
        if (!fileInput.files.length) {
            alert('Please select a file');
            return;
        }
        
        const formData = new FormData();
        formData.append('file', fileInput.files[0]);
        formData.append('path', currentPath);
        
        const progressBar = document.querySelector('#upload-progress .progress-bar');
        document.getElementById('upload-progress').style.display = 'block';
        progressBar.style.width = '50%';
        
        fetchWithCsrf(`/files/upload/${currentSiteId}`, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                bootstrap.Modal.getInstance(document.getElementById('uploadModal')).hide();
                form.reset();
                document.getElementById('upload-progress').style.display = 'none';
                loadDirectory(currentPath);
            } else {
                alert('Upload failed: ' + data.error);
                document.getElementById('upload-progress').style.display = 'none';
            }
        })
        .catch(error => {
            alert('Upload failed: ' + error);
            document.getElementById('upload-progress').style.display = 'none';
        });
    });
    
    // New folder submit
    document.getElementById('folder-submit').addEventListener('click', function() {
        if (!currentSiteId) return;
        
        const form = document.getElementById('new-folder-form');
        const folderName = document.getElementById('folder-name').value;
        
        if (!folderName) {
            alert('Please enter a folder name');
            return;
        }
        
        const formData = new FormData();
        formData.append('path', currentPath);
        formData.append('folder_name', folderName);
        
        fetchWithCsrf(`/files/create-folder/${currentSiteId}`, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                bootstrap.Modal.getInstance(document.getElementById('newFolderModal')).hide();
                form.reset();
                loadDirectory(currentPath);
            } else {
                alert('Failed to create folder: ' + data.error);
            }
        })
        .catch(error => {
            alert('Failed to create folder: ' + error);
        });
    });
    
    // New file submit
    document.getElementById('file-submit').addEventListener('click', function() {
        if (!currentSiteId) return;
        
        const form = document.getElementById('new-file-form');
        const fileName = document.getElementById('file-name-input').value;
        
        if (!fileName) {
            alert('Please enter a file name');
            return;
        }
        
        const formData = new FormData();
        formData.append('path', currentPath);
        formData.append('file_name', fileName);
        
        fetchWithCsrf(`/files/create-file/${currentSiteId}`, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                bootstrap.Modal.getInstance(document.getElementById('newFileModal')).hide();
                form.reset();
                loadDirectory(currentPath);
            } else {
                alert('Failed to create file: ' + data.error);
            }
        })
        .catch(error => {
            alert('Failed to create file: ' + error);
        });
    });
    
    // Compress button
    document.getElementById('compress-btn').addEventListener('click', function() {
        if (!currentSiteId) return;
        new bootstrap.Modal(document.getElementById('compressModal')).show();
    });
    
    // Compress submit
    document.getElementById('compress-submit').addEventListener('click', function() {
        if (!currentSiteId) return;
        
        const archiveName = document.getElementById('archive-name').value;
        const selected = Array.from(document.querySelectorAll('.file-checkbox:checked'))
            .map(cb => cb.dataset.path);
        
        if (selected.length === 0) {
            alert('No files selected');
            return;
        }
        
        const formData = new FormData();
        selected.forEach(path => formData.append('paths[]', path));
        formData.append('archive_name', archiveName);
        formData.append('current_path', currentPath);
        
        fetchWithCsrf(`/files/compress/${currentSiteId}`, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                bootstrap.Modal.getInstance(document.getElementById('compressModal')).hide();
                document.getElementById('compress-form').reset();
                loadDirectory(currentPath);
            } else {
                alert('Compression failed: ' + data.error);
            }
        })
        .catch(error => {
            alert('Compression failed: ' + error);
        });
    });
    
    // Rename submit
    document.getElementById('rename-submit').addEventListener('click', function() {
        if (!currentSiteId) return;
        
        const oldPath = document.getElementById('rename-old-path').value;
        const newName = document.getElementById('new-name').value;
        
        if (!newName) {
            alert('Please enter a new name');
            return;
        }
        
        const formData = new FormData();
        formData.append('old_path', oldPath);
        formData.append('new_name', newName);
        
        fetchWithCsrf(`/files/rename/${currentSiteId}`, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                bootstrap.Modal.getInstance(document.getElementById('renameModal')).hide();
                loadDirectory(currentPath);
            } else {
                alert('Rename failed: ' + data.error);
            }
        })
        .catch(error => {
            alert('Rename failed: ' + error);
        });
    });
    
    // Save file
    document.getElementById('save-file').addEventListener('click', function() {
        if (!currentSiteId) return;
        
        const content = document.getElementById('file-content').value;
        const path = document.getElementById('file-content').dataset.path;
        
        const formData = new FormData();
        formData.append('path', path);
        formData.append('content', content);
        
        fetchWithCsrf(`/files/save/${currentSiteId}`, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                bootstrap.Modal.getInstance(document.getElementById('editModal')).hide();
                alert('File saved successfully');
            } else {
                alert('Save failed: ' + data.error);
            }
        })
        .catch(error => {
            alert('Save failed: ' + error);
        });
    });
});

function loadDirectory(path) {
    document.getElementById('loading').style.display = 'block';
    document.getElementById('file-list-container').style.display = 'none';
    document.getElementById('empty-state').style.display = 'none';
    
    fetchWithCsrf(`/files/browse/${currentSiteId}?path=${encodeURIComponent(path)}`)
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                alert('Error: ' + data.error);
                return;
            }
            
            currentPath = data.path;
            updateBreadcrumb(data.path);
            renderFileList(data.items);
            
            document.getElementById('loading').style.display = 'none';
            if (data.items.length === 0) {
                document.getElementById('empty-state').style.display = 'block';
            } else {
                document.getElementById('file-list-container').style.display = 'block';
            }
        })
        .catch(error => {
            alert('Error loading directory: ' + error);
            document.getElementById('loading').style.display = 'none';
        });
}

function updateBreadcrumb(path) {
    const breadcrumb = document.getElementById('breadcrumb');
    breadcrumb.innerHTML = '<li class="breadcrumb-item"><a href="#" onclick="loadDirectory(\'\'); return false;">htdocs</a></li>';
    
    if (path) {
        const parts = path.split('/');
        let accumulatedPath = '';
        
        parts.forEach((part, index) => {
            if (!part) return;
            accumulatedPath += (accumulatedPath ? '/' : '') + part;
            const isLast = index === parts.length - 1;
            
            if (isLast) {
                breadcrumb.innerHTML += `<li class="breadcrumb-item active">${escapeHtml(part)}</li>`;
            } else {
                const pathToUse = accumulatedPath;
                breadcrumb.innerHTML += `<li class="breadcrumb-item"><a href="#" onclick="loadDirectory('${escapeHtml(pathToUse)}'); return false;">${escapeHtml(part)}</a></li>`;
            }
        });
    }
}

function renderFileList(items) {
    const tbody = document.querySelector('#file-list tbody');
    tbody.innerHTML = '';
    
    // Sort: directories first, then by name
    items.sort((a, b) => {
        if (a.is_dir && !b.is_dir) return -1;
        if (!a.is_dir && b.is_dir) return 1;
        return a.name.localeCompare(b.name);
    });
    
    items.forEach(item => {
        const row = document.createElement('tr');
        
        const icon = item.is_dir ? 'bi-folder-fill' : 'bi-file-earmark';
        const isZip = item.name.endsWith('.zip');
        
        const checkboxCell = `
            <td><input type="checkbox" class="file-checkbox" data-path="${escapeHtml(item.path)}"></td>
        `;
        
        const nameCell = `
            <td>
                <i class="bi ${icon}"></i>
                ${item.is_dir ? 
                    `<a href="#" onclick="loadDirectory('${escapeHtml(item.path)}'); return false;">${escapeHtml(item.name)}</a>` :
                    `<span>${escapeHtml(item.name)}</span>`
                }
            </td>
        `;
        
        const sizeCell = `<td>${item.is_dir ? '-' : formatBytes(item.size)}</td>`;
        const modifiedCell = `<td>${escapeHtml(item.modified)}</td>`;
        
        const actionsCell = `
            <td>
                ${!item.is_dir ? 
                    `<a href="/files/download/${currentSiteId}?path=${encodeURIComponent(item.path)}" 
                        class="btn btn-sm btn-outline-primary" title="Download">
                        <i class="bi bi-download"></i>
                    </a>
                    <button onclick="editFile('${escapeHtml(item.path)}', '${escapeHtml(item.name)}')" 
                            class="btn btn-sm btn-outline-info" title="Edit">
                        <i class="bi bi-pencil"></i>
                    </button>` : 
                    ''
                }
                ${isZip && !item.is_dir ? 
                    `<button onclick="extractZip('${escapeHtml(item.path)}')" 
                            class="btn btn-sm btn-outline-success" title="Extract">
                        <i class="bi bi-file-zip"></i>
                    </button>` : 
                    ''
                }
                <button onclick="renameItem('${escapeHtml(item.path)}', '${escapeHtml(item.name)}')" 
                        class="btn btn-sm btn-outline-warning" title="Rename">
                    <i class="bi bi-pencil-square"></i>
                </button>
                <button onclick="deleteItem('${escapeHtml(item.path)}', ${item.is_dir})" 
                        class="btn btn-sm btn-outline-danger" title="Delete">
                    <i class="bi bi-trash"></i>
                </button>
            </td>
        `;
        
        row.innerHTML = checkboxCell + nameCell + sizeCell + modifiedCell + actionsCell;
        tbody.appendChild(row);
    });
    
    // Setup select all checkbox
    document.getElementById('select-all').addEventListener('change', function() {
        const checkboxes = document.querySelectorAll('.file-checkbox');
        checkboxes.forEach(cb => cb.checked = this.checked);
        updateCompressButton();
    });
    
    // Setup individual checkboxes
    document.querySelectorAll('.file-checkbox').forEach(cb => {
        cb.addEventListener('change', updateCompressButton);
    });
}

function updateCompressButton() {
    const checkedCount = document.querySelectorAll('.file-checkbox:checked').length;
    const compressBtn = document.getElementById('compress-btn');
    if (checkedCount > 0) {
        compressBtn.style.display = 'inline-block';
    } else {
        compressBtn.style.display = 'none';
    }
}

function renameItem(oldPath, oldName) {
    document.getElementById('rename-old-path').value = oldPath;
    document.getElementById('new-name').value = oldName;
    new bootstrap.Modal(document.getElementById('renameModal')).show();
}

function editFile(path, name) {
    document.getElementById('edit-file-name').textContent = name;
    const modal = new bootstrap.Modal(document.getElementById('editModal'));
    modal.show();
    
    // Load file content
    fetchWithCsrf(`/files/edit/${currentSiteId}?path=${encodeURIComponent(path)}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                document.getElementById('file-content').value = data.content;
                document.getElementById('file-content').dataset.path = path;
            } else {
                alert('Failed to load file: ' + data.error);
                modal.hide();
            }
        })
        .catch(error => {
            alert('Failed to load file: ' + error);
            modal.hide();
        });
}

function extractZip(path) {
    if (!confirm('Extract this ZIP archive?')) {
        return;
    }
    
    const formData = new FormData();
    formData.append('path', path);
    
    fetchWithCsrf(`/files/extract/${currentSiteId}`, {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('Archive extracted successfully');
            loadDirectory(currentPath);
        } else {
            alert('Extraction failed: ' + data.error);
        }
    })
    .catch(error => {
        alert('Extraction failed: ' + error);
    });
}

function deleteItem(path, isDir) {
    const itemType = isDir ? 'folder' : 'file';
    if (!confirm(`Are you sure you want to delete this ${itemType}?`)) {
        return;
    }
    
    const formData = new FormData();
    formData.append('path', path);
    
    fetchWithCsrf(`/files/delete/${currentSiteId}`, {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            loadDirectory(currentPath);
        } else {
            alert('Delete failed: ' + data.error);
        }
    })
    .catch(error => {
        alert('Delete failed: ' + error);
    });
}

function formatBytes(bytes) {
    if (bytes === 0) return '0 B';
    const k = 1024;
    const sizes = ['B', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}
</script>

<style>
.list-group-item {
    background-color: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

.list-group-item:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
}

.list-group-item.active {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
    color: white;
}

.breadcrumb {
    background-color: var(--bg-tertiary);
    margin-bottom: 0;
    padding: 0.5rem 1rem;
    border-radius: 0.25rem;
}

.breadcrumb-item a {
    color: var(--accent-color);
    text-decoration: none;
}

.breadcrumb-item a:hover {
    text-decoration: underline;
}

.breadcrumb-item.active {
    color: var(--text-primary);
}

.breadcrumb-item + .breadcrumb-item::before {
    color: var(--text-secondary);
}

.progress {
    background-color: var(--bg-tertiary);
}

.spinner-border {
    color: var(--accent-color);
}
</style>
{% endblock %}
